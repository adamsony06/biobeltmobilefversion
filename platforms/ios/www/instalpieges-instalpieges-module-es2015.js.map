{"version":3,"sources":["./src/app/instalpieges/instalpieges.page.html","./src/app/instalpieges/instalpieges-routing.module.ts","./src/app/instalpieges/instalpieges.module.ts","./src/app/instalpieges/instalpieges.page.scss","./src/app/instalpieges/instalpieges.page.ts"],"names":[],"mappings":"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","file":"instalpieges-instalpieges-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Installation</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\" *ngIf=\\\"!global.isBBAM\\\">\\r\\n      <ion-button fill=\\\"clear\\\"> <ion-icon name=\\\"globe\\\" color=\\\"light\\\"></ion-icon>ADMIN</ion-button> \\r\\n     </ion-buttons>\\r\\n     <ion-buttons slot=\\\"end\\\" *ngIf=\\\"global.isBBAM\\\">\\r\\n      <ion-button fill=\\\"clear\\\"> <ion-icon name=\\\"wifi\\\" color=\\\"light\\\"></ion-icon>{{global.ssid}}</ion-button> \\r\\n     </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [forceOverscroll]=\\\"false\\\">\\r\\n  <ion-row>\\r\\n    <ion-col size=\\\"12\\\">\\r\\n      <h1 style=\\\"text-align: center;\\\"> {{\\\"Vous avez \\\"+nbpiege+\\\" Pièges dans la ceinture \\\"+upc3.upcNameId}} </h1>\\r\\n    </ion-col>\\r\\n    <ion-col size=\\\"12\\\">\\r\\n      <h2>Souhaitez vous modifier le nombre de pièges ?</h2>\\r\\n    </ion-col>\\r\\n    <ion-col>\\r\\n      <ion-item>\\r\\n        <ion-input [(ngModel)]=\\\"nbpiege\\\" placeholder=\\\"Si oui combien ?\\\" type=\\\"tel\\\"></ion-input>\\r\\n      </ion-item>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n  <cad-canvas></cad-canvas>\\r\\n  <ion-button (click)=\\\"onEdit();\\\" size=\\\"block\\\"> Modifier</ion-button>\\r\\n  <ion-button (click)=\\\"onContinue();\\\" size=\\\"block\\\" color=\\\"secondary\\\">Continuer</ion-button>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { InstalpiegesPage } from './instalpieges.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: InstalpiegesPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class InstalpiegesPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { InstalpiegesPageRoutingModule } from './instalpieges-routing.module';\r\n\r\nimport { InstalpiegesPage } from './instalpieges.page';\r\nimport {CADCanvasComponent} from '../canvas/canvas.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    InstalpiegesPageRoutingModule\r\n  ],\r\n  declarations: [InstalpiegesPage,CADCanvasComponent]\r\n})\r\nexport class InstalpiegesPageModule {}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2luc3RhbHBpZWdlcy9pbnN0YWxwaWVnZXMucGFnZS5zY3NzIn0= */\"","import { Component, OnInit, NgZone } from '@angular/core';\r\nimport { Storage } from '@ionic/storage';\r\nimport {GlobalService} from '../api/global.service';\r\nimport {Upcv3serviceService} from '../api/upcv3service.service';\r\nimport { UPCV3 } from '../model/upcv3/upcv3';\r\nimport {Router} from '@angular/router';\r\nimport { Platform } from '@ionic/angular';\r\nimport { UPCModbus, UPCState } from '../model/upcv3/upcmodbus';\r\nimport { Network } from '@ionic-native/network/ngx';\r\nimport { Hotspot, HotspotNetwork } from '@ionic-native/hotspot/ngx';\r\nimport { async } from '@angular/core/testing';\r\n\r\n@Component({\r\n  selector: 'app-instalpieges',\r\n  templateUrl: './instalpieges.page.html',\r\n  styleUrls: ['./instalpieges.page.scss'],\r\n})\r\nexport class InstalpiegesPage implements OnInit {\r\n  upc3:UPCV3;\r\n  upc : UPCModbus;\r\n  nbpiege:number;\r\n  token:string;\r\n  UPCModbus : UPCModbus;\r\n  upcStatus : number;\r\n  isBBAM = false;\r\n  constructor(private storage:Storage,\r\n              private global:GlobalService,\r\n              private upcv3service:Upcv3serviceService,\r\n              private router:Router,\r\n              private platform : Platform, private ngZone: NgZone,private network : Network,private hospot : Hotspot) { \r\n\r\n                // Init UPC\r\n    if(this.platform.is(\"android\")){\r\n      this.hospot.connectToWifi(\"BBAM\",\"BioBeltService\").then(res=>{\r\n        this.isBBAM = true;\r\n        this.platform.ready().then(\r\n          readySource => {\r\n            if (readySource == 'cordova') {\r\n              alert(\"Yes\");\r\n              this.upc = new UPCModbus(state => {\r\n                this.ngZone.run(() => {\r\n                  // Force refresh UI\r\n                });\r\n              });\r\n              \r\n              this.network.onConnect().subscribe(() => {\r\n                alert(this.network.type);\r\n                if (this.network.type === this.network.Connection.WIFI) {\r\n                  this.upc.reconnect();\r\n                 \r\n                  \r\n                }\r\n              });\r\n            }\r\n          }\r\n        );\r\n      }).catch(error=>{\r\n        alert(JSON.stringify(error));\r\n      })   \r\n    } else {\r\n      \r\n      this.platform.ready().then(\r\n        readySource => {\r\n          if (readySource == 'cordova') {\r\n            alert(\"Yes\");\r\n            this.upc = new UPCModbus(state => {\r\n              this.ngZone.run(() => {\r\n                // Force refresh UI\r\n                \r\n              });\r\n            });\r\n            setTimeout(()=>{\r\n                this.upc.client.connect();\r\n            },5000)\r\n            setTimeout(()=>{\r\n              \r\n              this.upc.client.getStringFromHoldingRegister(40001,10).then(res=>{\r\n                this.upc3.upcNameId = res;\r\n                alert(res);\r\n              }).catch(error=>{\r\n                alert(JSON.stringify(error));\r\n              })\r\n            },10000);\r\n            setTimeout(()=>{\r\n              this.upc.client.getStringFromHoldingRegister(40015,1).then(res=>{\r\n                this.nbpiege = res;\r\n                alert(res);\r\n              }).catch(error=>{\r\n                alert(JSON.stringify(error));\r\n              })\r\n            },10000)\r\n            \r\n            \r\n            \r\n            this.network.onConnect().subscribe(() => {\r\n              if (this.network.type === this.network.Connection.WIFI) {\r\n                this.upc.reconnect();\r\n                \r\n              }\r\n            });\r\n            \r\n          }\r\n        }\r\n      );\r\n    }           \r\n          \r\n    \r\n    }\r\n\r\n  ngOnInit() {\r\n    this.upc3 = this.global.upc3;\r\n    \r\n\t\r\n  this.nbpiege = this.global.upc3.generalParameters.upcTrapNum;\r\n    this.storage.get(\"token\").then(val=>{\r\n      this.token = val\r\n    });\r\n  }\r\n  async onEdit(){\r\n    \r\n    //this.upc.editTrap();\r\n    \r\n    if(this.platform.is(\"android\")){\r\n      var value = Math.round(this.nbpiege*this.upc3.generalParameters.co2FlowRefTrap*10.0)/10.0;\r\n      alert(JSON.stringify(this.upc));\r\n      await this.upc.client.setIntInHoldingRegister(40015,1,this.nbpiege).then(data=>{\r\n        alert(JSON.stringify(data));\r\n      }).catch(err=>{\r\n        alert(JSON.stringify(err));\r\n      });\r\n      \r\n      await this.upc.client.setFloatInHoldingRegister(40018,value).then(data=>{\r\n        alert(JSON.stringify(data));\r\n      }).catch(err=>{\r\n        alert(JSON.stringify(err));\r\n      });;\r\n      await this.upc.client.setFloatInHoldingRegister(40020,value).then(data=>{\r\n        alert(JSON.stringify(data));\r\n      }).catch(err=>{\r\n        alert(JSON.stringify(err));\r\n      });\r\n      this.router.navigate(['bottles']);\r\n    } /*else {\r\n      var value = Math.round(this.nbpiege*this.upc3.generalParameters.co2FlowRefTrap*10.0)/10.0;\r\n      alert(JSON.stringify(this.upc));\r\n      await this.upc.client.setIntInHoldingRegister(40015,1,this.nbpiege).then(data=>{\r\n        alert(JSON.stringify(data));\r\n      }).catch(err=>{\r\n        alert(JSON.stringify(err));\r\n      });\r\n      await this.upc.client.setFloatInHoldingRegister(40018,value).then(data=>{\r\n        alert(JSON.stringify(data));\r\n      }).catch(err=>{\r\n        alert(JSON.stringify(err));\r\n      });;\r\n      await this.upc.client.setFloatInHoldingRegister(40020,value).then(data=>{\r\n        alert(JSON.stringify(data));\r\n      }).catch(err=>{\r\n        alert(JSON.stringify(err));\r\n      });\r\n      /*this.upcv3service.editTrap(this.upc3.id,this.nbpiege,this.token).subscribe(res=>{\r\n        this.router.navigate(['bottles']);\r\n      })*/\r\n    /*}*/\r\n    setTimeout(async res=>{\r\n          await this.upc.client.connect();\r\n    },5000);\r\n    var value = Math.round(this.nbpiege*this.upc3.generalParameters.co2FlowRefTrap*10.0)/10.0;\r\n      setTimeout( async item=>{\r\n        this.upc.getAllVars();\r\n        this.upc.readGeneralParameters()\r\n        alert(JSON.stringify(this.upc.trapNum));\r\n        await this.upc.client.setIntInHoldingRegister(40015,1,this.nbpiege).then(data=>{\r\n          alert(JSON.stringify(data));\r\n        }).catch(err=>{\r\n          alert(JSON.stringify(err));\r\n        });\r\n      },10000);\r\n      setTimeout(async res=>{\r\n        await this.upc.client.connect();\r\n      },5000);\r\n      setTimeout(async item=>{\r\n        await this.upc.client.setFloatInHoldingRegister(40018,value).then(data=>{\r\n          alert(JSON.stringify(data));\r\n        }).catch(err=>{\r\n          alert(JSON.stringify(err));\r\n        });\r\n      },10000);\r\n      setTimeout(async res=>{\r\n        await this.upc.client.connect();\r\n        },5000);\r\n      setTimeout(async item =>{\r\n        await this.upc.client.setFloatInHoldingRegister(40020,value).then(data=>{\r\n          alert(JSON.stringify(data));\r\n        }).catch(err=>{\r\n          alert(JSON.stringify(err));\r\n        });\r\n      },10000);\r\n      \r\n    \r\n    \r\n    /*this.upcv3service.editTrap(this.upc3.id,this.nbpiege,this.token).subscribe(res=>{\r\n      this.router.navigate(['bottles']);\r\n    })*/\r\n  }\r\n  onContinue(){\r\n    this.router.navigate(['bottles']);\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}