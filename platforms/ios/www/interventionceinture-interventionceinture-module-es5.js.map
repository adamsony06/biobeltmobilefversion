{"version":3,"sources":["./src/app/interventionceinture/interventionceinture.page.html","./src/app/interventionceinture/interventionceinture-routing.module.ts","./src/app/interventionceinture/interventionceinture.module.ts","./src/app/interventionceinture/interventionceinture.page.scss","./src/app/interventionceinture/interventionceinture.page.ts"],"names":[],"mappings":"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","file":"interventionceinture-interventionceinture-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons> \\n    <!--<ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>    \\n    <ion-buttons slot=\\\"end\\\" *ngIf=\\\"!global.isBBAM\\\">\\n      <ion-button fill=\\\"clear\\\"> <ion-icon name=\\\"globe\\\" color=\\\"light\\\" (click)=\\\"onSynchroB1B2();\\\"></ion-icon>ADMIN</ion-button> \\n     </ion-buttons>\\n     <ion-buttons slot=\\\"end\\\" *ngIf=\\\"global.isBBAM\\\">\\n      <ion-button fill=\\\"clear\\\"> <ion-icon name=\\\"wifi\\\" color=\\\"light\\\"></ion-icon>{{global.ssid}}</ion-button> \\n     </ion-buttons>-->\\n     <ion-title>Intervention sur une ceinture</ion-title>\\n     <ion-buttons slot=\\\"end\\\" *ngIf=\\\"!global.isBBAM\\\">\\n      <ion-button fill=\\\"clear\\\"> <ion-icon name=\\\"globe\\\" color=\\\"light\\\" (click)=\\\"onSynchroB1B2();\\\"></ion-icon>ADMIN</ion-button> \\n     </ion-buttons>\\n     <ion-buttons slot=\\\"end\\\" *ngIf=\\\"global.isBBAM\\\">\\n      <ion-button fill=\\\"clear\\\"> <ion-icon name=\\\"wifi\\\" color=\\\"light\\\"></ion-icon>{{global.ssid}}</ion-button> \\n     </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>  \\n  <ion-grid>  \\n    <ion-row style=\\\"display: flex; justify-content: center;\\\">\\n      <ion-col size=\\\"8\\\" text-center style=\\\"padding-top: 5%;\\\">\\n        <h4>Intervention sur une ceinture</h4>\\n      </ion-col>\\n    </ion-row>  \\n    <ion-row>        \\n        <ion-col size=\\\"12\\\">\\n          <fieldset>\\n            <legend>Objet de l'intervention</legend> \\n          \\n           <ion-select  multiple=\\\"true\\\" [(ngModel)]=\\\"motive\\\">\\n              <ion-select-option *ngFor=\\\"let motiveOption of motiveOptions\\\" [value]=\\\"motiveOption\\\">\\n                {{motiveOption}}\\n              </ion-select-option>\\n            </ion-select>\\n          </fieldset>\\n        </ion-col>        \\n        <ion-col size=\\\"12\\\">\\n          <fieldset>\\n            <legend>Intervenants</legend> \\n          \\n           <ion-select multiple=\\\"true\\\" [(ngModel)]=\\\"intervenantsChoisis\\\">\\n              <ion-select-option *ngFor=\\\"let intervenant of intervenants\\\" [value]=\\\"intervenant\\\">\\n                {{intervenant}}\\n              </ion-select-option>\\n            </ion-select>\\n          </fieldset>\\n        </ion-col>\\n        <ion-col size=\\\"12\\\">\\n          <fieldset>\\n            <legend>SÃ©lection ceinture</legend> \\n          \\n           <ion-select [(ngModel)]=\\\"ceintureChoisie\\\">\\n              <ion-select-option *ngFor=\\\"let nearUPCName of nearUPCNames\\\" [value]=\\\"nearUPCName\\\">\\n                {{nearUPCName}}\\n              </ion-select-option>\\n            </ion-select>\\n          </fieldset>\\n        </ion-col>\\n      \\n      \\n       \\n      \\n    </ion-row>\\n    \\n  </ion-grid>\\n \\n</ion-content>\\n<ion-footer>\\n  \\n  <ion-button color=\\\"primary\\\" size=\\\"block\\\" (click)=\\\"goTo();\\\">Selection ceinture</ion-button>\\n\\n</ion-footer>\\n\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { InterventionceinturePage } from './interventionceinture.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: InterventionceinturePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class InterventionceinturePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { InterventionceinturePageRoutingModule } from './interventionceinture-routing.module';\n\nimport { InterventionceinturePage } from './interventionceinture.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    InterventionceinturePageRoutingModule\n  ],\n  declarations: [InterventionceinturePage]\n})\nexport class InterventionceinturePageModule {}\n","module.exports = \"fieldset {\\n  padding-left: 2%;\\n  padding-right: 2%;\\n  border: 1px #2E7117 solid;\\n  border-radius: 1em;\\n}\\n\\nlegend {\\n  width: -webkit-fit-content;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  font-size: larger;\\n  color: #2E7117;\\n  font-style: italic;\\n  padding-left: 1%;\\n  padding-right: 2%;\\n}\\n\\nion-select {\\n  margin-top: -4%;\\n}\\n\\nul {\\n  list-style: none;\\n  padding-left: 4%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oYXJtYW5kL0Rlc2t0b3AvYmlvYmVsdG1vYmlsZS9zcmMvYXBwL2ludGVydmVudGlvbmNlaW50dXJlL2ludGVydmVudGlvbmNlaW50dXJlLnBhZ2Uuc2NzcyIsInNyYy9hcHAvaW50ZXJ2ZW50aW9uY2VpbnR1cmUvaW50ZXJ2ZW50aW9uY2VpbnR1cmUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7QUNDRjs7QURDQTtFQUNFLDBCQUFBO0VBQUEsdUJBQUE7RUFBQSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtBQ0VGOztBRENBO0VBQ0UsZUFBQTtBQ0VGOztBREdBO0VBQ0UsZ0JBQUE7RUFDQSxnQkFBQTtBQ0FGIiwiZmlsZSI6InNyYy9hcHAvaW50ZXJ2ZW50aW9uY2VpbnR1cmUvaW50ZXJ2ZW50aW9uY2VpbnR1cmUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiZmllbGRzZXQge1xuICBwYWRkaW5nLWxlZnQ6IDIlO1xuICBwYWRkaW5nLXJpZ2h0OiAyJTsgXG4gIGJvcmRlcjogMXB4ICMyRTcxMTcgc29saWQ7XG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcbn1cbmxlZ2VuZCB7ICBcbiAgd2lkdGg6Zml0LWNvbnRlbnQ7IFxuICBmb250LXNpemU6bGFyZ2VyO1xuICBjb2xvcjogIzJFNzExNztcbiAgZm9udC1zdHlsZTogaXRhbGljO1xuICBwYWRkaW5nLWxlZnQ6IDElO1xuICBwYWRkaW5nLXJpZ2h0OiAyJTtcbn1cblxuaW9uLXNlbGVjdHtcbiAgbWFyZ2luLXRvcDogLTQlO1xuICBcbn1cblxuXG51bCB7XG4gIGxpc3Qtc3R5bGU6bm9uZTtcbiAgcGFkZGluZy1sZWZ0OiA0JTtcbn1cbiIsImZpZWxkc2V0IHtcbiAgcGFkZGluZy1sZWZ0OiAyJTtcbiAgcGFkZGluZy1yaWdodDogMiU7XG4gIGJvcmRlcjogMXB4ICMyRTcxMTcgc29saWQ7XG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcbn1cblxubGVnZW5kIHtcbiAgd2lkdGg6IGZpdC1jb250ZW50O1xuICBmb250LXNpemU6IGxhcmdlcjtcbiAgY29sb3I6ICMyRTcxMTc7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgcGFkZGluZy1sZWZ0OiAxJTtcbiAgcGFkZGluZy1yaWdodDogMiU7XG59XG5cbmlvbi1zZWxlY3Qge1xuICBtYXJnaW4tdG9wOiAtNCU7XG59XG5cbnVsIHtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbiAgcGFkZGluZy1sZWZ0OiA0JTtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Upcv3serviceService } from '../api/upcv3service.service';\nimport { Router } from '@angular/router';\nimport { GlobalService } from '../api/global.service';\nimport {Storage} from \"@ionic/storage\";\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { UPCV3 } from '../model/upcv3/upcv3';\n\n@Component({\n  selector: 'app-interventionceinture',\n  templateUrl: './interventionceinture.page.html',\n  styleUrls: ['./interventionceinture.page.scss'],\n})\nexport class InterventionceinturePage implements OnInit {\n  motiveOptions = [\"Installation\",\"Modification du nombre de piÃ¨ges\",\"Remise en route\",\"Maintenance\",\"Changements de bouteilles CO2\",\"Changement d'UPC\", \"Hivernage\", \"Autre\"];\n  motive = [\"Installation\"];\n  data;\n  data2: UPCV3[];\n  token;;\n  intervenants = [this.global.proprietaire];\n  intervenantsChoisis = [this.global.proprietaire];\n  nearUPC=[];\n  nearUPCNames=[];\n  ceintureChoisie;\n\n  constructor(\n    private upcv3service : Upcv3serviceService,\n    private storage : Storage,\n    private router : Router,\n    private global:GlobalService,\n    private geolocation: Geolocation\n  ) { }\n\n  async ngOnInit() {\n    await this.storage.get('token').then(val =>{this.token = val\n      this.upcv3service.getOperators(this.token).subscribe(res=>{\n        this.data = res.result \n        //alert(JSON.stringify(this.data))\n        //alert(this.data[0][\"lastName\"])\n        for (var i = 0; i < this.data.length; i++){\n            this.intervenants.push(this.data[i][\"lastName\"]+\" \"+ this.data[i][\"firstName\"]);\n          }         \n        //alert(this.intervenants)\n      })\n      this.upcv3service.getUPC3(this.token).subscribe(res =>{\n        this.data2 = res.result\n        this.geolocation.getCurrentPosition().then(res=>{\n          var lat = res.coords.latitude;\n          var long = res.coords.longitude;\n  \n          //alert(JSON.stringify(this.data2))\n  \n          this.data2.forEach(element=>{\n            if (this.getDistanceFromLatLonInKm(lat, long, element.lat, element.lng) < 30){\n              this.nearUPC.push(element);\n            }\n            this.nearUPCNames.push(element.upcNameId)\n            //element.communicationParameters.\n            //alert(this.getDistanceFromLatLonInKm(lat, long, element.latitude, element.longitude))\n          })\n  \n          console.log(JSON.stringify(this.nearUPC));\n          /*this.nearUPCNames.forEach(element => {      \n            $(\"#upcList\" ).append(\"<ion-select [(ngModel)]='ceintureChoisie'><ion-select-option *ngFor='let nearUPCName of nearUPCNames' [value]='nearUPCName'>{{nearUPCName}}</ion-select-option></ion-select>\");\n          })*/\n        });\n      })\n      \n\n    });   \n   \n   \n  }\n\n  selectionCeinture(){\n    \n  }\n\n  deg2rad(deg) {\n    return deg * (Math.PI/180)\n  }\n\n  getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {\n    var R = 6371; // Radius of the earth in km\n    var dLat = this.deg2rad(lat2-lat1);  // deg2rad below\n    var dLon = this.deg2rad(lon2-lon1); \n    var a = \n      Math.sin(dLat/2) * Math.sin(dLat/2) +\n      Math.cos(this.deg2rad(lat1)) * Math.cos(this.deg2rad(lat2)) * \n      Math.sin(dLon/2) * Math.sin(dLon/2)\n      ; \n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \n    var d = R * c; // Distance in km\n    return d;\n  }\n\n  goTo(){\n    this.global.objetIntervention = this.motive\n    this.global.intervenants = this.intervenantsChoisis\n    this.router.navigate(['interventionceinture2'])\n  }\n\n\n}\n"],"sourceRoot":""}