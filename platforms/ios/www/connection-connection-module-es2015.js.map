{"version":3,"sources":["./src/app/connection/connection.page.html","./src/app/connection/connection-routing.module.ts","./src/app/connection/connection.module.ts","./src/app/connection/connection.page.scss","./src/app/connection/connection.page.ts"],"names":[],"mappings":"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","file":"connection-connection-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Etat de la connexion au réseau</ion-title>\\n    <ion-buttons slot=\\\"end\\\" *ngIf=\\\"!global.isBBAM\\\">\\n      <ion-button fill=\\\"clear\\\"> <ion-icon name=\\\"globe\\\" color=\\\"light\\\" (click)=\\\"onSynchroB1B2();\\\"></ion-icon>ADMIN</ion-button> \\n     </ion-buttons>\\n     <ion-buttons slot=\\\"end\\\" *ngIf=\\\"global.isBBAM\\\">\\n      <ion-button fill=\\\"clear\\\"> <ion-icon name=\\\"wifi\\\" color=\\\"light\\\"></ion-icon>{{global.ssid}}</ion-button> \\n     </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-card>\\n    <ion-card-header>\\n      <ion-card-title style=\\\"text-align: center;\\\">Etat Instantané</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col size=\\\"10\\\">Mode</ion-col>\\n          <ion-col size=\\\"2\\\">{{mode}}</ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"2\\\">Niv.</ion-col>\\n          <ion-col size=\\\"8\\\"><ion-range color=\\\"danger\\\" [value]=\\\"level\\\" max=\\\"100\\\"></ion-range></ion-col>\\n          <ion-col size=\\\"2\\\" *ngIf=\\\"level < 500\\\">{{level}}</ion-col>\\n          <ion-col size=\\\"2\\\" *ngIf=\\\"level >= 500\\\">Non Connecté</ion-col>\\n        </ion-row>\\n        <ion-row *ngIf=\\\"ber\\\">\\n          <ion-col size=\\\"10\\\">BER</ion-col>\\n          <ion-col size=\\\"2\\\">{{ber}}</ion-col>\\n        </ion-row>\\n        \\n      </ion-grid>\\n    </ion-card-content>\\n  </ion-card>\\n  <ion-card *ngIf=\\\"ber\\\">\\n    <ion-card-header>\\n      <ion-card-title style=\\\"text-align: center;\\\">Statistiques dernière 24 h</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col size=\\\"2\\\">Mode</ion-col>\\n          <ion-col size=\\\"2\\\">-</ion-col>\\n          <ion-col size=\\\"2\\\">2G</ion-col>\\n          <ion-col size=\\\"2\\\">3G</ion-col>\\n          <ion-col size=\\\"2\\\">4G</ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"2\\\">Durée</ion-col>\\n          <ion-col size=\\\"2\\\">{{dureTab[3]}}</ion-col>\\n          <ion-col size=\\\"2\\\">{{dureTab[0]}}</ion-col>\\n          <ion-col size=\\\"2\\\">{{dureTab[1]}}</ion-col>\\n          <ion-col size=\\\"2\\\">{{dureTab[2]}}</ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"2\\\">Niveau</ion-col>\\n          <ion-col size=\\\"2\\\">-</ion-col>\\n          <ion-col size=\\\"2\\\" *ngFor=\\\"let l of levelTab\\\">{{l}}</ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"2\\\">BER</ion-col>\\n          <ion-col size=\\\"2\\\">-</ion-col>\\n          <ion-col size=\\\"2\\\" *ngFor=\\\"let b of bertab\\\"><ion-label>{{b == 0 ? '-' : b}}</ion-label></ion-col>\\n\\n        </ion-row>\\n        \\n      </ion-grid>\\n    </ion-card-content>\\n  </ion-card>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ConnectionPage } from './connection.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ConnectionPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ConnectionPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ConnectionPageRoutingModule } from './connection-routing.module';\n\nimport { ConnectionPage } from './connection.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ConnectionPageRoutingModule\n  ],\n  declarations: [ConnectionPage]\n})\nexport class ConnectionPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Nvbm5lY3Rpb24vY29ubmVjdGlvbi5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, NgZone, ChangeDetectorRef } from '@angular/core';\nimport { Platform, LoadingController } from '@ionic/angular';\nimport { Hotspot, HotspotNetwork } from '@ionic-native/hotspot/ngx';\nimport { UPCModbus } from '../model/upcv3/upcmodbus';\nimport { GlobalService } from '../api/global.service';\n\ndeclare var WifiWizard2: any;\n\n@Component({\n  selector: 'app-connection',\n  templateUrl: './connection.page.html',\n  styleUrls: ['./connection.page.scss'],\n})\nexport class ConnectionPage implements OnInit {\n  upc : UPCModbus;\n  mode = \"\";\n  level = 0;\n  ber = 0;\n  bertab = [];\n  fw = 0;\n  levelTab = [];\n  dureTab = [];\n\n  constructor(private platform : Platform, private global : GlobalService, private loadingCTRL : LoadingController,private hotspot : Hotspot,private ngZone : NgZone, private cd : ChangeDetectorRef) { }\n\n  ngOnInit() {\n    this.platform.ready().then(async ()=>{\n      /*if( this.platform.is('ios')){\n        WifiWizard2.iOSConnectNetwork(\"BBAM\",\"BioBeltService\").then(async ()=>{\n          var loading = await this.loadingCTRL.create({\n            message : \"Connection à l'UPC en cours...\",\n            duration : 10000\n          })\n          loading.present();\n          this.global.isBBAM = true;\n          this.upc = new UPCModbus(state => {\n            this.ngZone.run(() => {\n              // Force refresh UI\n              \n                \n                //this.readDiffusionParameters();\n              \n            });\n          });\n          setTimeout(async ()=>{\n                  await this.upc.client.connect();\n\n                  this.readConnectionParams();\n                  loading.dismiss();\n          },5000)\n          \n        })\n      }*/ //else if (this.platform.is(\"android\")){\n          //this.hotspot.connectToWifi(\"BBAM\",\"BioBeltService\").then(async ()=>{\n            var loading = await this.loadingCTRL.create({\n              message : \"Connection à l'UPC en cours...\",\n              duration : 10000\n            })\n            loading.present();\n            this.global.isBBAM = true;\n            this.upc = new UPCModbus(state => {\n              this.ngZone.run(() => {\n                // Force refresh UI\n                \n                  \n                  //this.readDiffusionParameters();\n                \n              });\n            });\n            await this.upc.client.connect();\n\n            this.readConnectionParams();\n            loading.dismiss();\n          /*}).catch(err=>{\n            alert(JSON.stringify(err));\n          })*/\n      //}\n    })\n    \n  }\n  readConnectionParams() {\n    //40414 40415 \n    //41225 41239\n    var intervalconnect =\n    setInterval(()=>{\n      //this.upc.client.readHoldingRegisters(41225,20).then(res=>{\n        \n        /*this.bertab.push(this.upc.client.registerToFloat([res[0],res[1]]));\n        this.bertab.push(this.upc.client.registerToFloat([res[2],res[3]]));\n        this.bertab.push(this.upc.client.registerToFloat([res[4],res[5]]));\n        this.bertab.push(this.upc.client.registerToFloat([res[6],res[7]]));*/\n        //this.upc.client.getIntFromHoldingRegister(40168,1).then(res=>{\n          \n          \n            this.upc.client.readHoldingRegisters(41219,50).then(res=>{\n              this.levelTab.push(this.upc.client.registerToFloat([res[0],res[1]]));\n              this.levelTab.push(this.upc.client.registerToFloat([res[2],res[3]]));\n              this.levelTab.push(this.upc.client.registerToFloat([res[4],res[5]]));\n\n\n              this.bertab.push(this.upc.client.registerToFloat([res[6],res[7]]));\n              this.bertab.push(this.upc.client.registerToFloat([res[8],res[9]]));\n              this.bertab.push(this.upc.client.registerToFloat([res[10],res[11]]));\n              this.bertab.push(this.upc.client.registerToFloat([res[12],res[13]]));\n\n              //this.dureTab.push(this.upc.client.registerToFloat([res[14],res[15]]));\n              this.dureTab.push(this.upc.client.registerToFloat([res[16],res[17]]));\n              this.dureTab.push(this.upc.client.registerToFloat([res[18],res[19]]));\n              this.dureTab.push(this.upc.client.registerToFloat([res[20],res[21]]));\n\n            })\n          \n          \n        //})\n        this.upc.client.readHoldingRegisters(40414,10).then(res=>{\n          var connect = this.upc.client.registerToUint32([res[0]]);\n          switch(connect) {\n            case 0: this.mode = 'Non enregistré';this.ber = 0;\n            case 1: this.mode =  '2G GPRS'; this.ber = this.bertab[0];\n            case 2: this.mode =  '2G EDGE'; this.ber = this.bertab[1];\n            case 3: this.mode =  '3G WCDMA';this.ber = this.bertab[2];\n            case 4: this.mode =  '3G HSDPA';this.ber = this.bertab[2];\n            case 5: this.mode =  '3G HSUPA';this.ber = this.bertab[2];\n            case 6: this.mode =  '3G HSDPA/HSUPA';this.ber = this.bertab[2];\n            case 7: this.mode =  '4G';this.ber = this.bertab[3];\n          }\n          this.level = this.upc.client.registerToUint32([res[1]]);\n          if(this.level > 500) {\n            this.level = 0;\n          }\n          this.cd.detectChanges();\n          \n        }).catch(err=>{\n          alert(\"Veuillez vous connecter à BBAM\");\n          this.global.ssid = \"ADMIN\";\n          this.global.isBBAM = false;\n          clearInterval(intervalconnect);\n        })\n    //})\n    \n      \n    },500)\n    \n  }\n\n}\n"],"sourceRoot":""}