<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Contrôle diffusion CO2</ion-title>
    <ion-buttons slot="end" *ngIf="!global.isBBAM">
      <ion-button fill="clear"> <ion-icon name="globe" color="light" (click)="onSynchroB1B2();"></ion-icon>ADMIN</ion-button> 
     </ion-buttons>
     <ion-buttons slot="end" *ngIf="global.isBBAM">
      <ion-button fill="clear"> <ion-icon name="wifi" color="light"></ion-icon>{{global.ssid}}</ion-button> 
     </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row style="text-align: center;">
      <ion-col size="12"><ion-button shape="round" size="large" [color]="colordif" (click)="startstop();">{{textdiff}}</ion-button></ion-col>
    </ion-row>

  </ion-grid>
  <ion-card>
    <ion-card-header>
      <ion-card-title style="text-align: center;">Paramètre</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col>
            Débit Max
          </ion-col>
          <ion-col>
            <input  type="number" class="form-control form-control-sm" step="0.1"
                    
                    (ngModelChange)="changeFluxMax();"
                    [(ngModel)]="fluxmax">
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>Intensité</ion-col>
          <ion-col> <input  type="number" class="form-control form-control-sm"
                    
            (ngModelChange)="changeInt();"
            [(ngModel)]="intensity"></ion-col>
        </ion-row>
        <ion-row>
          <ion-col >Bouteille active</ion-col>
          <ion-col>
            <select class="custom-select custom-select-sm"
                
            (ngModelChange)="changeResAct($event);"
            [(ngModel)]="resActive">
      <option value="0">B0</option>
      <option value="1">B1</option>
      <option value="2">B2</option>
    </select>
          </ion-col>
        </ion-row>
      </ion-grid>
      
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-header>
      <ion-card-title style="text-align: center;">Mesures</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="6">
            <ion-label color="dark">{{"Intensité : "+ intensity}}</ion-label>
          </ion-col>
          <ion-col size="6">
            <ion-label color="dark">{{"Température : "+temp.toFixed(2)+" °C"}}</ion-label>
        </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="6"></ion-col>
          <ion-col size="3"><ion-label color="dark" style="font-weight :bolder"> Réf</ion-label></ion-col>
          <ion-col size="3"><ion-label color="dark" style="font-weight :bolder">Mesure</ion-label></ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="6"><ion-label color="dark">Débit (nl/min):</ion-label></ion-col>
          <ion-col size="3"><ion-label color="dark">{{debiRef.toFixed(3)}}</ion-label></ion-col>
          <ion-col size="3" [ngClass]="{'bgsuccess':backgroundDeb,'bgdanger':!backgroundDeb, 'bgwarning':bgdebwarning}"><ion-label color="dark">{{debiMes.toFixed(3)}}</ion-label></ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="6"><ion-label color="dark">PE (Bars):</ion-label></ion-col>
          <ion-col size="3"><ion-label color="dark"></ion-label></ion-col>
          <ion-col size="3"><ion-label color="dark">{{peMes.toFixed(3)}}</ion-label></ion-col>

        </ion-row>
        <ion-row>
          <ion-col size="6"><ion-label color="dark">PS (Bars):</ion-label></ion-col>
          <ion-col size="3"></ion-col>
          <ion-col size="3"><ion-label color="dark">{{psMes.toFixed(3)}}</ion-label></ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="6"><ion-label color="dark">PS comp (Bars):</ion-label></ion-col>
          <ion-col size="3"><ion-label color="dark"></ion-label></ion-col>
          <ion-col size="3"><ion-label color="dark">{{psCompMes.toFixed(3)}}</ion-label></ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card> 
</ion-content>
