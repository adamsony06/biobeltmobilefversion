{"version":3,"sources":["./src/app/modal/bottlemodal/bottlemodal.page.html","./src/app/modal/bottlemodal/bottlemodal-routing.module.ts","./src/app/modal/bottlemodal/bottlemodal.module.ts","./src/app/modal/bottlemodal/bottlemodal.page.scss","./src/app/modal/bottlemodal/bottlemodal.page.ts"],"names":[],"mappings":"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","file":"modal-bottlemodal-bottlemodal-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    \\r\\n    <ion-title>Bouteilles</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\"><ion-button fill=\\\"clear\\\" size=\\\"default\\\" (click)=\\\"onDismiss();\\\"><ion-label>Finis</ion-label></ion-button></ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  \\r\\n  <ion-list>\\r\\n    <ion-item *ngFor=\\\"let bottle of listBottles;let i=index;\\\"><ion-label>{{bottle.brand+\\\" \\\"+bottle.designation.toFixed(2)+\\\" kg\\\"}}</ion-label><ion-label color=\\\"danger\\\" [innerHtml]=\\\"onChange(i)\\\"></ion-label><ion-input slot=\\\"end\\\" type=\\\"tel\\\" placeholder=\\\"Quantité\\\" [(ngModel)]=\\\"bouteilles[i].qty\\\"></ion-input><ion-button color=\\\"primary\\\" fill=\\\"clear\\\" size=\\\"default\\\" slot=\\\"end\\\" (click)=\\\"onBottleScan(i);\\\"><ion-icon name=\\\"barcode\\\"></ion-icon></ion-button></ion-item>\\r\\n  </ion-list>\\r\\n  \\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { BottlemodalPage } from './bottlemodal.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: BottlemodalPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class BottlemodalPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { BottlemodalPageRoutingModule } from './bottlemodal-routing.module';\r\n\r\nimport { BottlemodalPage } from './bottlemodal.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    BottlemodalPageRoutingModule\r\n  ],\r\n  declarations: [BottlemodalPage]\r\n})\r\nexport class BottlemodalPageModule {}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZGFsL2JvdHRsZW1vZGFsL2JvdHRsZW1vZGFsLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\r\nimport {Upcv3serviceService} from '../../api/upcv3service.service';\r\nimport { Storage } from '@ionic/storage';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport {GlobalService} from '../../api/global.service';\r\n@Component({\r\n  selector: 'app-bottlemodal',\r\n  templateUrl: './bottlemodal.page.html',\r\n  styleUrls: ['./bottlemodal.page.scss'],\r\n})\r\nexport class BottlemodalPage implements OnInit {\r\n  token:string;\r\n  listBottles:any;\r\n  res;\r\n  \r\n  cpt=0;\r\n  bouteilles = [{\r\n    'nom' : 'Air liquide 22.68 kg',\r\n    'designation' : [],\r\n    'qty' : '',\r\n    'text' : '',\r\n    'cpt' : 0\r\n},\r\n{\r\n  'nom':'Air liquide 10.00 kg',\r\n  'designation' : [],\r\n  'qty' : '',\r\n  'text' : '',\r\n  'cpt' :0\r\n},\r\n{\r\n  'nom':'Messer 37.50 kg',\r\n  'designation' : [],\r\n  'qty' : '',\r\n  'text' : '',\r\n  'cpt' : 0\r\n},\r\n{\r\n  'nom' : 'Air liquide 180.00 kg',\r\n  'designation' : [],\r\n  'qty' : '',\r\n  'text' : '',\r\n  'cpt':0\r\n},\r\n{\r\n  'nom': 'Air liquide 20.00 kg',\r\n  'designation' : [],\r\n  'qty' : '',\r\n  'text' : '',\r\n  'cpt' :0\r\n},\r\n{\r\n  'nom':'Air liquide 100.00 kg',\r\n  'designation' : [],\r\n  'qty' : '',\r\n  'text' : '',\r\n  'cpt' : 0\r\n},\r\n{\r\n  'nom' : 'Air liquide 34.00 kg',\r\n  'designation' : [],\r\n  'qty' : '',\r\n  'text' : '',\r\n  'cpt' : 0\r\n}];\r\n\r\n  constructor(private barcodeScanner:BarcodeScanner,\r\n              private upc3service:Upcv3serviceService,\r\n              private storage:Storage,\r\n              private modal:ModalController,\r\n              private global: GlobalService) { }\r\n\r\n  async ngOnInit() {\r\n    if(this.compareIfNotNull(this.global.B1) && this.res === 'B1'){\r\n      this.bouteilles = this.global.B1;\r\n    }\r\n    if (this.compareIfNotNull(this.global.B2) && this.res === 'B2'){\r\n      this.bouteilles = this.global.B2;\r\n    }\r\n    await this.storage.get('token').then(val => this.token = val);\r\n    await this.upc3service.getAllBottles(this.token).subscribe(res=>{\r\n        this.listBottles = res.result;\r\n        \r\n    });\r\n  }\r\n  compareIfNotNull(tab){\r\n    for (var i=0;i<tab.length;i++){\r\n      if (tab[i].qty !== ''){\r\n        return true\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  onChange(i) {\r\n    if(this.bouteilles[i].qty === '' || parseInt(this.bouteilles[i].qty)-this.bouteilles[i].cpt === 0){\r\n      this.bouteilles[i].qty = '';\r\n      return '';\r\n    }\r\n    else{\r\n      return this.bouteilles[i].text = \"(\"+(parseInt(this.bouteilles[i].qty)-this.bouteilles[i].cpt)+\" à scanner)\";\r\n\r\n    }\r\n  }\r\n  async onBottleScan(i){\r\n    \r\n    this.barcodeScanner.scan().then(res=>{\r\n      \r\n      this.bouteilles[i].designation.push(res[\"text\"]);      \r\n      \r\n      this.bouteilles[i].cpt++;\r\n    }\r\n      \r\n    ).catch(err =>{\r\n      alert(JSON.stringify(err));\r\n    });\r\n    \r\n    \r\n  }\r\n  async onDismiss(){\r\n    if (this.res === 'B1'){\r\n      this.global.B1 = this.bouteilles;\r\n    }\r\n    if(this.res === 'B2') {\r\n      this.global.B2 = this.bouteilles\r\n    }\r\n    await this.modal.dismiss();\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}