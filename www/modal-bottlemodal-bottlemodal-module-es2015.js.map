{"version":3,"sources":["./src/app/modal/bottlemodal/bottlemodal.page.html","./src/app/modal/bottlemodal/bottlemodal-routing.module.ts","./src/app/modal/bottlemodal/bottlemodal.module.ts","./src/app/modal/bottlemodal/bottlemodal.page.scss","./src/app/modal/bottlemodal/bottlemodal.page.ts"],"names":[],"mappings":"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","file":"modal-bottlemodal-bottlemodal-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    \\n    <ion-title>Bouteilles</ion-title>\\n    <ion-buttons slot=\\\"end\\\"><ion-button fill=\\\"clear\\\" size=\\\"default\\\" (click)=\\\"onDismiss();\\\"><ion-label>Finis</ion-label></ion-button></ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  \\n  <ion-list>\\n    <ion-item *ngFor=\\\"let bottle of listBottles;let i=index;\\\"><ion-label>{{bottle.brand+\\\" \\\"+bottle.designation.toFixed(2)+\\\" kg\\\"}}</ion-label><ion-label color=\\\"danger\\\" [innerHtml]=\\\"onChange(i)\\\"></ion-label><ion-input slot=\\\"end\\\" type=\\\"tel\\\" placeholder=\\\"Quantité\\\" [(ngModel)]=\\\"bouteilles[i].qty\\\"></ion-input><ion-button color=\\\"primary\\\" fill=\\\"clear\\\" size=\\\"default\\\" slot=\\\"end\\\" (click)=\\\"onBottleScan(i);\\\"><ion-icon name=\\\"barcode\\\"></ion-icon></ion-button></ion-item>\\n  </ion-list>\\n  \\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { BottlemodalPage } from './bottlemodal.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BottlemodalPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class BottlemodalPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BottlemodalPageRoutingModule } from './bottlemodal-routing.module';\n\nimport { BottlemodalPage } from './bottlemodal.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    BottlemodalPageRoutingModule\n  ],\n  declarations: [BottlemodalPage]\n})\nexport class BottlemodalPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZGFsL2JvdHRsZW1vZGFsL2JvdHRsZW1vZGFsLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\nimport {Upcv3serviceService} from '../../api/upcv3service.service';\nimport { Storage } from '@ionic/storage';\nimport { ModalController } from '@ionic/angular';\nimport { LoadingController } from '@ionic/angular';\nimport {GlobalService} from '../../api/global.service';\n@Component({\n  selector: 'app-bottlemodal',\n  templateUrl: './bottlemodal.page.html',\n  styleUrls: ['./bottlemodal.page.scss'],\n})\nexport class BottlemodalPage implements OnInit {\n  token:string;\n  listBottles:any;\n  res;\n  \n  cpt=0;\n  bouteilles = [{\n    'nom' : 'Air liquide 22.68 kg',\n    'designation' : [],\n    'qty' : '',\n    'text' : '',\n    'cpt' : 0\n},\n{\n  'nom':'Air liquide 10.00 kg',\n  'designation' : [],\n  'qty' : '',\n  'text' : '',\n  'cpt' :0\n},\n{\n  'nom':'Messer 37.50 kg',\n  'designation' : [],\n  'qty' : '',\n  'text' : '',\n  'cpt' : 0\n},\n{\n  'nom' : 'Air liquide 180.00 kg',\n  'designation' : [],\n  'qty' : '',\n  'text' : '',\n  'cpt':0\n},\n{\n  'nom': 'Air liquide 20.00 kg',\n  'designation' : [],\n  'qty' : '',\n  'text' : '',\n  'cpt' :0\n},\n{\n  'nom':'Air liquide 100.00 kg',\n  'designation' : [],\n  'qty' : '',\n  'text' : '',\n  'cpt' : 0\n},\n{\n  'nom' : 'Air liquide 34.00 kg',\n  'designation' : [],\n  'qty' : '',\n  'text' : '',\n  'cpt' : 0\n}];\n\n  constructor(private barcodeScanner:BarcodeScanner,\n              private upc3service:Upcv3serviceService,\n              private storage:Storage,\n              private modal:ModalController,\n              private global: GlobalService) { }\n\n  async ngOnInit() {\n    if(this.compareIfNotNull(this.global.B1) && this.res === 'B1'){\n      this.bouteilles = this.global.B1;\n    }\n    if (this.compareIfNotNull(this.global.B2) && this.res === 'B2'){\n      this.bouteilles = this.global.B2;\n    }\n    await this.storage.get('token').then(val => this.token = val);\n    await this.upc3service.getAllBottles(this.token).subscribe(res=>{\n        this.listBottles = res.result;\n        \n    });\n  }\n  compareIfNotNull(tab){\n    for (var i=0;i<tab.length;i++){\n      if (tab[i].qty !== ''){\n        return true\n      }\n    }\n    return false;\n  }\n  onChange(i) {\n    if(this.bouteilles[i].qty === '' || parseInt(this.bouteilles[i].qty)-this.bouteilles[i].cpt === 0){\n      this.bouteilles[i].qty = '';\n      return '';\n    }\n    else{\n      return this.bouteilles[i].text = \"(\"+(parseInt(this.bouteilles[i].qty)-this.bouteilles[i].cpt)+\" à scanner)\";\n\n    }\n  }\n  async onBottleScan(i){\n    \n    this.barcodeScanner.scan().then(res=>{\n      \n      this.bouteilles[i].designation.push(res[\"text\"]);      \n      \n      this.bouteilles[i].cpt++;\n    }\n      \n    ).catch(err =>{\n      alert(JSON.stringify(err));\n    });\n    \n    \n  }\n  async onDismiss(){\n    if (this.res === 'B1'){\n      this.global.B1 = this.bouteilles;\n    }\n    if(this.res === 'B2') {\n      this.global.B2 = this.bouteilles\n    }\n    await this.modal.dismiss();\n  }\n\n}\n"],"sourceRoot":""}